<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON Check</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-5">
      <h1>Check if a string is valid JSON</h1>
      <div class="mb-3">
        <label for="jsonInput" class="form-label"
          >Enter the string to check:</label
        >
        <textarea class="form-control" id="jsonInput" rows="6"></textarea>
      </div>
      <div id="result" class="mt-3"></div>
      <button class="btn btn-primary mt-3" onclick="checkJSON()">Check</button>
      <div class="mb-3 mt-5">
        <label for="fixedJson" class="form-label">Possible Fix for JSON</label>
        <textarea class="form-control" id="fixedJson" rows="3"></textarea>
      </div>
    </div>

    <script src="./jsonrepair.js"></script>
    <!-- JavaScript function to check JSON -->
    <script>
      function checkJSON() {
        const { jsonrepair } = JSONRepair;
        const jsonStr = document.getElementById("jsonInput").value;
        const resultElement = document.getElementById("result");
        const fixedJsonInput = document.getElementById("fixedJson");

        try {
          fixedJsonInput.value = "";
          fixedJsonInput.style.color = "";
          JSON.parse(jsonStr);
          resultElement.innerHTML =
            '<span class="text-success">The string is a valid JSON.</span>';
        } catch (e) {
          try {
            fixedJsonInput.value = jsonrepair(jsonStr);
          } catch (e) {
            fixedJsonInput.value = "could not fix JSON";
            fixedJsonInput.style.color = "red";
          }
          resultElement.innerHTML =
            '<span class="text-danger">The string is NOT a valid JSON.</span>';
        }
      }
    </script>
  </body>
</html>
